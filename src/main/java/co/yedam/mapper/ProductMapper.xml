<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="co.yedam.mapper.ProductMapper">
	<select id="productList" parameterType="co.yedam.vo.ProductVO" resultType ="co.yedam.vo.ProductVO">
		select  product_no , 
		         product_name, 
		         product_price,
		         desc_text,
		         desc_img, 
		         left_cnt,
		         category, 
		         product_img, 
		         company, 
		         launch_date,
		         discount_pct,
		         delete_chk
		from product
		order by ${order} desc <!-- 최신순 : 1, 할인 순: 11 -->
	</select>
	
	<select id="sortProductList" parameterType="co.yedam.vo.ProductVO" resultType ="co.yedam.vo.ProductVO">
		select  product_no , 
		         product_name, 
		         product_price,
		         desc_text,
		         desc_img, 
		         left_cnt,
		         category, 
		         product_img, 
		         company, 
		         launch_date,
		         discount_pct,
		         delete_chk
		from product
		where category =${category}
		order by ${order} desc <!-- 최신순 : 1, 할인 순: 11 -->
	</select>

	<select id="getProduct" parameterType="int" resultType="co.yedam.vo.ProductVO">
		select *
		from product
		where product_no = #{pno}
	</select>
	
	<insert id="addProd" parameterType="co.yedam.vo.ProductVO">
		INSERT INTO product (product_no , 
		                     product_name, 
		                     product_price,
		                     desc_text,
		                     desc_img, 
		                     left_cnt,
		                     category, 
		                     product_img, 
		                     company, 
		                     discount_pct) 
					VALUES(product_no.nextval, 
					       #{productName},
					       #{productPrice}, 
					       #{descText}, 
					       #{descImg}, 
					       #{leftCnt}, 
					       #{category}, 
					       #{productImg}, 
					       #{company},  
					       #{discountPct});
	</insert>
	
	<update id="delProd" parameterType="co.yedam.vo.ProductVO">
	update product
	set delete_chk = ${deleteChk}
	where product_no = ${productNo}
	</update>
	
	<insert id = "addToWishList" parameterType="WishListVO">
		insert into wishlist
		values(#{memberNo}, #{productNo})
	</insert>
	
	<delete id="delFromWishList" parameterType="WishListVO">
		delete from wishlist
		where product_no=#{productNo} and member_no=#{memberNo}
	</delete>
	
	<select id="wishList" parameterType="int" resultType ="WishListVO">
		select from wishlist
		where member_no=#{memberNo}
	</select>

</mapper>